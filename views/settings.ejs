<h3>‚öôÔ∏è Database Settings</h3>
<form id="dbForm" class="mb-3">
  <div class="mb-2">
    <label>Host</label>
    <input class="form-control" name="host" value="<%= config.host %>">
  </div>
  <div class="mb-2">
    <label>Port</label>
    <input class="form-control" name="port" value="<%= config.port %>">
  </div>
  <div class="mb-2">
    <label>User</label>
    <input class="form-control" name="user" value="<%= config.user %>">
  </div>
  <div class="mb-2">
    <label>Password</label>
    <input type="password" class="form-control" name="password" value="<%= config.password %>">
  </div>
  <div class="mb-2">
    <label>Database</label>
    <input class="form-control" name="database" value="<%= config.database %>">
  </div>
  <button type="button" class="btn btn-primary" onclick="saveDb()">üíæ Save</button>
  <button type="button" class="btn btn-success" onclick="testDb()">üîå Test Connection</button>
</form>
<div id="result"></div>

<script>
async function saveDb() {
  const form = Object.fromEntries(new FormData(document.getElementById('dbForm')));
  const r = await fetch('/api/save-db', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(form) });
  const data = await r.json();
  document.getElementById('result').innerHTML = data.message;
}
async function testDb() {
  const form = Object.fromEntries(new FormData(document.getElementById('dbForm')));
  const r = await fetch('/api/test-db', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(form) });
  const data = await r.json();
  document.getElementById('result').innerHTML = data.message;
}
</script>
